
<!DOCTYPE html>
<html lang="" class="loading">
<head><meta name="generator" content="Hexo 3.8.0">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>前端|微信小程序开发学习笔记(一) - 看远方</title>
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="google" content="notranslate">
    <meta name="keywords" content="ZzuWild,"> 
    <meta name="description" content="WZH��s BLOG,一.每一个用户访问到的页面都需要在全局配置中来登记它的访问路径123456&amp;#123;  &#34;pages&#34;: [    &#34;pages/about/about&#34;,    &#34;pages/weekly/we,"> 
    <meta name="author" content="Zihao Wang"> 
    <link rel="alternative" href="atom.xml" title="看远方" type="application/atom+xml"> 
    <link rel="icon" href="/img/yezi.jpg"> 
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">
    <link rel="stylesheet" href="/css/diaspora.css">
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
         (adsbygoogle = window.adsbygoogle || []).push({
              google_ad_client: "ca-pub-8691406134231910",
              enable_page_level_ads: true
         });
    </script>
    <script async custom-element="amp-auto-ads" src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
    </script>
</head>
</html>
<body class="loading">
    <span id="config-title" style="display:none">看远方</span>
    <div id="loader"></div>
    <div id="single">
    <div id="top" style="display: block;">
    <div class="bar" style="width: 0;"></div>
    <a class="icon-home image-icon" href="javascript:;" data-url="http://zzuwild.top"></a>
    <div title="播放/暂停" class="icon-play"></div>
    <h3 class="subtitle">前端|微信小程序开发学习笔记(一)</h3>
    <div class="social">
        <!--<div class="like-icon">-->
            <!--<a href="javascript:;" class="likeThis active"><span class="icon-like"></span><span class="count">76</span></a>-->
        <!--</div>-->
        <div>
            <div class="share">
                <a title="获取二维码" class="icon-scan" href="javascript:;"></a>
            </div>
            <div id="qr"></div>
        </div>
    </div>
    <div class="scrollbar"></div>
</div>

    <div class="section">
        <div class="article">
    <div class="main">
        <h1 class="title">前端|微信小程序开发学习笔记(一)</h1>
        <div class="stuff">
            <span>五月 04, 2019</span>
            
  <ul class="post-tags-list"><li class="post-tags-list-item"><a class="post-tags-list-link" href="/tags/WXML/">WXML</a></li><li class="post-tags-list-item"><a class="post-tags-list-link" href="/tags/前端/">前端</a></li><li class="post-tags-list-item"><a class="post-tags-list-link" href="/tags/小程序/">小程序</a></li></ul>


        </div>
        <div class="content markdown">
            <h3 id="一-每一个用户访问到的页面都需要在全局配置中来登记它的访问路径"><a href="#一-每一个用户访问到的页面都需要在全局配置中来登记它的访问路径" class="headerlink" title="一.每一个用户访问到的页面都需要在全局配置中来登记它的访问路径"></a>一.每一个用户访问到的页面都需要在全局配置中来登记它的访问路径</h3><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"pages"</span>: [</span><br><span class="line">    <span class="string">"pages/about/about"</span>,</span><br><span class="line">    <span class="string">"pages/weekly/weekly"</span></span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="二-在wxml中添加页面链接"><a href="#二-在wxml中添加页面链接" class="headerlink" title="二.在wxml中添加页面链接"></a>二.在wxml中添加页面链接</h3><p>navigator  将特定文本添加页面链接 但不能放在text中<br>在wxml文件中 text元素的内容只能作为文本 无法识别navigator 因此将navigator放在text外部<br><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">    &lt;text&gt;我&lt;/text&gt;</span><br><span class="line">    &lt;navigator style=<span class="symbol">'display</span>: inline;' url='/pages/weekly/weekly' open-<span class="class"><span class="keyword">type</span></span>=<span class="symbol">'navigat</span>e' hover-<span class="class"><span class="keyword">class</span></span>=<span class="symbol">'nav</span>-hover'&gt;每周推荐&lt;/navigator&gt;</span><br><span class="line">    &lt;text&gt;一部好片&lt;/text&gt;</span><br><span class="line">&lt;navigator style=<span class="symbol">'display</span>: inline;' url='/pages/weekly/weekly' open-<span class="class"><span class="keyword">type</span></span>=<span class="symbol">'navigat</span>e' hover-<span class="class"><span class="keyword">class</span></span>=<span class="symbol">'nav</span>-hover' <span class="class"><span class="keyword">class</span></span>=<span class="symbol">'nav</span>-<span class="keyword">default</span>'&gt;每周推荐&lt;/navigator&gt;</span><br></pre></td></tr></table></figure></p>
<p>wxss样式表中,样式规则发生冲突时 ,因为两个样式规则中的配置是相同的,谁在后面谁主导</p>
<p>因此将默认样式规则 nav-default放在nav-hover</p>
<p><img src="https://zzufire.github.io/img/1.5.png" alt=""></p>
<h3 id="三-给小程序配置底部标签栏"><a href="#三-给小程序配置底部标签栏" class="headerlink" title="三. 给小程序配置底部标签栏"></a>三. 给小程序配置底部标签栏</h3><p>配置tabBar-对若干一级页面的入口链接<br>全局配置app.json</p>
<ol>
<li>准备icon图<br>在app.json中配置 tabBar<figure class="highlight xquery"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"tabBar"</span>: &#123;</span><br><span class="line">    <span class="string">"color"</span>: <span class="string">""</span>,</span><br><span class="line">    <span class="string">"backgroundColor"</span>: <span class="string">""</span>,</span><br><span class="line">    <span class="string">"selectedColor"</span>: <span class="string">""</span>,</span><br><span class="line">    <span class="string">"list"</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">"pagePath"</span>: <span class="string">"pages/about/about"</span>,</span><br><span class="line">        <span class="string">"text"</span>: <span class="string">"关于"</span>,</span><br><span class="line">        <span class="string">"iconPath"</span>: <span class="string">"images/icons/home.png"</span>,</span><br><span class="line">        <span class="string">"selectedIconPath"</span>: <span class="string">"images/icons/home-fill.png"</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">"pagePath"</span>: <span class="string">"pages/weekly/weekly"</span>,</span><br><span class="line">        <span class="string">"text"</span>: <span class="string">"每周推荐"</span>,</span><br><span class="line">        <span class="string">"iconPath"</span>: <span class="string">"images/icons/fire (1).png"</span>,</span><br><span class="line">        <span class="string">"selectedIconPath"</span>: <span class="string">"images/icons/fire-fill.png"</span></span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>这时若使用文本链接应在navigator 的 open-type=’navigate’ 修改为  open-type=’switchTab’</p>
<p>在app.json中配置window顶部标题栏保证全局的设置相同</p>
<h3 id="四-数据绑定-动态的从服务区中获取"><a href="#四-数据绑定-动态的从服务区中获取" class="headerlink" title="四.数据绑定 (动态的从服务区中获取)"></a>四.数据绑定 (动态的从服务区中获取)</h3><p>1.传统方式<br>一般来说会在页面加载的过程中通过一个ajax调用来请求server返回本周推荐电影详情信息<br><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">var thisweekmovie = &#123;</span><br><span class="line"><span class="symbol">  name:</span> <span class="string">"教父"</span>,</span><br><span class="line"><span class="symbol">  comment:</span> <span class="string">"最精彩的剧本,最真实的黑帮电影"</span>,</span><br><span class="line"><span class="symbol">  imagePath:</span> <span class="string">"/images/42.jpg"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><img src="https://zzufire.github.io/img/1.6.png" alt=""><br>document.getElementById(“t001”).innerHTML = thisWeekMovie.name<br>首先,这种方式需要我们在收到数据之后或者说每次这个数据被更新的时候,我们都需要执行这样一段代码来对这个视图进行更新.</p>
<p>2.理想方式</p>
<p>我们应该有一种机制能够让这个视图中的每一部分与对应数据做一个映射 ,做映射之后,开发者只需考虑如何获取这个数据,以及如何对这个数据进行更新,获取更更新后,视图会自动根据映射进行更新.<br>在小程序框架中,每一个页面所需要的各种数据,都是集中在这个页面所注册的页面对象中定义的.<br>“.js”脚本文件中定义页面对象.</p>
<p>weekly.js<br><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">Page(&#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 页面的初始数据</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line"><span class="symbol">  data:</span> &#123;</span><br><span class="line">    thisweekmovie = &#123;    <span class="comment">/*内部状态变量*/</span></span><br><span class="line"><span class="symbol">      name:</span> <span class="string">"教父"</span>,</span><br><span class="line"><span class="symbol">      comment:</span> <span class="string">"最精彩的剧本,最真实的黑帮电影"</span>,</span><br><span class="line"><span class="symbol">      imagePath:</span> <span class="string">"/images/42.jpg"</span></span><br><span class="line"></span><br><span class="line">    &#125;,</span><br><span class="line"><span class="symbol">  count:</span> <span class="number">123</span>,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p>
<p>数据绑定内容定义好后,如何将数据在绑定输出到视图中显示 要把count的值渲染输出到视图上显示,我们是通过一个双大括号进行数据绑定的.<br>即双括号中执行的JS<br><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="built_in">text</span>&gt;&#123;&#123;<span class="built_in">count</span>&#125;&#125;&lt;/<span class="built_in">text</span>&gt;</span><br></pre></td></tr></table></figure></p>
<p>  (前端框架Vue)</p>
<p>绑定对象的类属性<br><figure class="highlight django"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">"container"</span>&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;<span class="name">image</span> <span class="attr">class</span>=<span class="string">"about-banner"</span> <span class="attr">src</span>=<span class="string">"</span></span></span><span class="template-variable">&#123;&#123;thisWeekMovie.imagePath&#125;&#125;</span><span class="xml"><span class="tag"><span class="string">"</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;<span class="name">text</span> <span class="attr">style</span>=<span class="string">""</span> &gt;</span></span><span class="template-variable">&#123;&#123;thisWeekMovie.name&#125;&#125;</span><span class="xml"><span class="tag">&lt;/<span class="name">text</span>&gt;</span>    <span class="comment">&lt;!--/*style 用于文本类型--&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;<span class="name">text</span>&gt;</span>点评: </span><span class="template-variable">&#123;&#123;thisWeekMovie.comment&#125;&#125;</span><span class="xml"><span class="tag">&lt;/<span class="name">text</span>&gt;</span></span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;<span class="name">text</span>&gt;</span></span><span class="template-variable">&#123;&#123;count&#125;&#125;</span><span class="xml"><span class="tag">&lt;/<span class="name">text</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span></span><br></pre></td></tr></table></figure></p>
<p>通过开发者工具调试器的APPdata这个type,我们可以实时的调试每一个页面的所有内部状态变量的取值<br><img src="https://zzufire.github.io/img/1.7.png" alt=""></p>
<h3 id="五-小程序运行环境与基本架构"><a href="#五-小程序运行环境与基本架构" class="headerlink" title="五. 小程序运行环境与基本架构"></a>五. 小程序运行环境与基本架构</h3><p>运行环境:<br>  每个小程序都是运行在它所在的微信客户端上的,通过微信客户端给它土工的运行环境,小程序可以直接获取微信客户端的原生体验和原生能力.  </p>
<ul>
<li>视图层和逻辑层     <ul>
<li>各自的描述语言  WXML视图文件和WXSS样式文件都是对渲染层的描述，脚本JS文件是对逻辑层的描述  </li>
<li>各自的运行进程  本例中about页和weekly页,都内置了一个webviewId的内部状态变量,来记录他们各自在几号weview进程之中进行渲染的.  <ul>
<li>基于数据绑定和事件机制进行通讯<br>基于数据绑定  在逻辑层对应的逻辑代码对相应的数据进行更新之后,逻辑层会将更新之后的数据传递给视图层会找到对应更新的视图部分进行相应的更新<br>基于事件机制   视图层接收用户的交互反馈行为,将这个行为传递给逻辑层对应的事件处理函数进行处理.  </li>
</ul>
</li>
</ul>
</li>
</ul>
<p>  <img src="https://zzufire.github.io/img/1.8.png" alt=""></p>
<h3 id="六-条件渲染"><a href="#六-条件渲染" class="headerlink" title="六. 条件渲染"></a>六. 条件渲染</h3><p>条件成立时组件才渲染生成.</p>
<p>wx:if<br>设置强烈推荐元素定义出来<br><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="built_in">text</span> wx:<span class="keyword">if</span>= <span class="string">"&#123;&#123;thisWeekMovie.ishighlyRecommended&#125;&#125;"</span> style=<span class="string">"font-size:16px; color:red;"</span>&gt;强烈推荐&lt;/<span class="built_in">text</span>&gt;</span><br></pre></td></tr></table></figure></p>
<p>强烈推荐这个text的元素,它的渲染生成的条件是: 绑定到了thisWeekMovie.ishighlyRecommended属性上.  </p>
<p>如果ishighlyRecommended: false  则不进行渲染  即不进行显示</p>
<p>hidden</p>
<pre><code>&lt;text hidden= &quot;{{!thisWeekMovie.ishighlyRecommended}}&quot; style=&quot;font-size:16px; color:red;&quot;&gt;强烈推荐&lt;/text&gt;
</code></pre><p><img src="https://zzufire.github.io/img/1.9.png" alt=" "><br>从语义上说,使用hidden属性是,这个元素总是要先被渲染生成的,hidden属性只是控制了其可见性而已. </p>
<p>上述两种方式的区别<br>当使用hidden时控制条件发生切换,视图中的节点数没有变化,所以开销小;而条件渲染会改变节点数,比如将ishighlyRecommended: false 变为true时会生成对应的元素和所有的hold,将这些元素插入到相应节点中.<br>对于可见性需要频繁切换的时候,我们就不建议使用条件渲染,开销较大.<br>对于hidden而言即使用户没有强烈推荐这个电影,那么它也会在初始生成的时候去生成这样一个元素.</p>
<p>########################################################</p>

            <!--[if lt IE 9]><script>document.createElement('audio');</script><![endif]-->
            <audio id="audio" loop="1" preload="auto" controls="controls" data-autoplay="true">
                <source type="audio/mpeg" src="http://zzuwild.top/music/深夜食堂.mp3">
            </audio>
            
        </div>
        
    <div id="gitalk-container" class="comment link" data-ae="true" data-ci="1005189f6279a5563473" data-cs="4e1f10454a5c09dccdcdf181c4b99b5a6d9a29bc" data-r="zzufire.github.io" data-o="zzufire" data-a="zzufire" data-d="false">查看评论</div>


    </div>
    
</div>


    </div>
</div>
</body>
<script src="//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>
<script src="//lib.baomitu.com/jquery/1.8.3/jquery.min.js"></script>
<script src="/js/plugin.js"></script>
<script src="/js/diaspora.js"></script>
<link rel="stylesheet" href="/photoswipe/photoswipe.css">
<link rel="stylesheet" href="/photoswipe/default-skin/default-skin.css">
<script src="/photoswipe/photoswipe.min.js"></script>
<script src="/photoswipe/photoswipe-ui-default.min.js"></script>

<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">
    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>
    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">
        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>
        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">
            <div class="pswp__top-bar">
                <!--  Controls are self-explanatory. Order can be changed. -->
                <div class="pswp__counter"></div>
                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
                <button class="pswp__button pswp__button--share" title="Share"></button>
                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                      <div class="pswp__preloader__cut">
                        <div class="pswp__preloader__donut"></div>
                      </div>
                    </div>
                </div>
            </div>
            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div> 
            </div>
            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>
            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>
            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>
        </div>
    </div>
</div>



<!-- Google Analytics -->
<script type="text/javascript">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-139636690-1', 'auto');
  ga('send', 'pageview');
</script>
<!-- End Google Analytics -->


</html>
